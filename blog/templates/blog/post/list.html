{% extends "base.html" %}
{% load blog_tags %}

{% block title %}My Blog{% endblock %}
{% block content %}
<style type="text/css">

	@media (max-width: 768px) { 
		.right-column{
			margin-left: 0px;
		}
	}

	@media (min-width: 768px) { 
		.right-column{
			margin-left: 20px;
		}
	}

	.blog-post-container{
		background-color: #fff;
		margin-bottom: 20px;
		width: 100%;
	}
	.create-post-bar{
		background-color: #fff;
		margin-bottom:20px;
	}

	.left-column{
		padding:0px;
	}

	.right-column{
		padding:0px;
	}
    .posts{
        max-width: 500px;
        width: 100%;
        margin: auto;
    }
</style>
    <h1>My Blog</h1>
    {% if tag %}
        <h2>Posts tagged with "{{ tag.name }}"</h2>
    {% endif %}
    <div class="container mt-4 p-4">
        <div class="row">
          <div class="posts">
            <h3 class="mx-auto mb-3 font-weight-normal">Blog posts</h3>
            {% if posts %}             
            <ul>
                {% for post in posts %}
                    <h2>
                        <a href="{{ post.get_absolute_url }}" style="text-decoration: none;">
                           <li class="list-group-item"> {{ post.title }}</li></a>
                    </h2>
                    {{ post.body|markdown|truncatewords:30 }}

                    <p class="tags">
                        Tags:
                        {% for tag in post.tags.all %}
                            <a href="{% url "blog:post_list_by_tag" tag.slug %}">
                                {{ tag.name }}
                            </a>
                        {% if not forloop.last %}, {% endif %}
                        {% endfor %}
                        </p>
                    <p class="date">
                        Published {{ post.publish }} by {{ post.author }}
                    </p>
                {% endfor %}
            </ul>
            {% else %}
            <p>There is no posts yet.</p>
            {% endif %}
          </div>
      
        </div>
      </div>
    
    {% include "pagination.html" with page=posts %}
{% endblock %}